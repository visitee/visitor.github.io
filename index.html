<!DOCTYPE html><html lang="en">
<head>
<meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Login for Data</title>
<style>
table, th, td {border: 1px solid black;border-collapse: collapse;padding: 8px;text-align: left;}
th, td {width: 120px;}
#printButton {margin-top: 20px;display: none;}
</style>
</head>
<body>
<center><h1>Data Viewer (alpha)</h1><form id="loginForm"><label for="username">Username:</label><input type="text" id="username" required><br><br><label for="password">Password:</label><input type="password" id="password" required><br><br><button type="submit">Login</button></form><p id="message" style="color: red;"></p><table id="groupTable" style="margin-top:20px; display:none;"><thead><tr><th>Timestamp</th><th>Media</th><th>Language</th><th>Taker</th><th>Line</th><th>Minute</th></tr></thead><tbody id="tableBody"></tbody><tfoot id="tableFooter"></tfoot></table><button id="printButton" onclick="printData()">Print</button></center>
<script>
const encodedDataAPI='aHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2FuYWx5c29yL2RhdGEtc2ltdWxhdG9yL21hc3Rlci9iMzlmYWUzOTZlMGU0YjlhMzU5Y2RkYThkMDYwMDQyMWU3NDQ4ZTFiNjkyZA==';const encodedUserEndpoint='aHR0cHM6Ly92aWV3ZXIuY2FsY3Vpcy51cy9jZDA0MGM1NWNmYzYzN2JiNjkyZA==';const dataUrl=atob(encodedDataAPI);const userUrl=atob(encodedUserEndpoint);async function fetchJson(url){try{const response=await fetch(url);return await response.json();}catch(error){console.error("Error fetching data:",error);document.getElementById("message").textContent="Failed to load data.";return null;}}
function displayGroupData(userData){const tableBody=document.getElementById('tableBody');const tableFooter=document.getElementById('tableFooter');tableBody.innerHTML='';tableFooter.innerHTML='';userData.sort((a,b)=>new Date(a.timestamp)-new Date(b.timestamp));let totalMinutes=0;userData.forEach(record=>{const row=document.createElement('tr');row.innerHTML=`<td>${record.timestamp}</td><td>${record.media}</td><td>${record.language}</td><td>${record.interpreter}</td><td>${record.line}</td><td>${record.minutes}</td>`;tableBody.appendChild(row);totalMinutes+=record.minutes;});const totalRow=document.createElement('tr');totalRow.innerHTML=`<td colspan="5"><strong>Total</strong></td><td><strong>${totalMinutes}</strong></td>`;tableFooter.appendChild(totalRow);document.getElementById('groupTable').style.display='table';document.getElementById('printButton').style.display='block';}
document.getElementById('loginForm').addEventListener('submit',async function(event){event.preventDefault();const username=document.getElementById('username').value.trim();const password=document.getElementById('password').value;const messageElement=document.getElementById('message');const users=await fetchJson(userUrl);if(!users)return;const user=users.find(u=>u.id===username);if(user&&user.password===password){messageElement.textContent="";const data=await fetchJson(dataUrl);if(data){const userData=data.filter(item=>item.id===username);if(userData.length>0){displayGroupData(userData);}else{messageElement.textContent="No data found for this user.";}}}else{messageElement.textContent="â›” authentication failed.";}});function printData(){const printContents=document.getElementById('groupTable').outerHTML;const originalContents=document.body.innerHTML;document.body.innerHTML=printContents;window.print();document.body.innerHTML=originalContents;document.getElementById('printButton').style.display='block';}
</script>
</body>
</html>
